<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title></title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.28.0/mapbox-gl.js'></script>
<script src='togeojson.js'></script>
<script src='power.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.28.0/mapbox-gl.css' rel='stylesheet' />
<style>
html, body {
	width: 100%;
	height: 100%;
	margin: 0;
	padding: 0;
}
body {
	display: flex;
	flex-direction: column;
}
#map {
	flex-grow: 1;
}
</style>
</head>
<body>
<div id='checks'>
	<label><input type="checkbox" id="check_grid"> Highlight ERCOT lines</label>
	<label><input type="checkbox" id="check_rtm"> Show ERCOT real-time market</label>
</div>
<div id='map' class='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoia3JlM2QiLCJhIjoiY2lwcjJrZ3p2MDZyOWZvbTN0bXV1eXF6ZiJ9.xXv_HMXLK04bEtmuwsEyMQ';
var map = new mapboxgl.Map({
	container: 'map',
	style: 'basic.json',
	hash: true,
	center: [-98.34, 30.55],
	zoom: 6
});

map.on('style.load', function () {
	style_init();

	document.getElementById('check_grid').addEventListener('change', function(e) {
		var checked = e.target.checked;
		if (checked) {
			set_ercot_highlight(true);
			set_ercot_boundary(true);
		} else {
			set_ercot_highlight(false);
			set_ercot_boundary(false);
		}
	});

	document.getElementById('check_rtm').addEventListener('change', function(e) {
		var checked = e.target.checked;
		if (checked) {
			add_ercot_rtm();
		} else {
			remove_ercot_rtm();
		}
	});

});

</script>
</body>
</html>
